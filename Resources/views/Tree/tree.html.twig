{#

This file is part of the Sonata package.

(c) Thomas Rabaix <thomas.rabaix@sonata-project.org>

For the full copyright and license information, please view the LICENSE
file that was distributed with this source code.

#}


{% include 'SymfonyCmfTreeBrowserBundle:Base:tree.html.twig' %}
<script type="text/javascript">
    $(document).ready(function() {
        var treeState = AdminTree.generateTreeStateArray("{{ tree.selectedNode }}");
        var defaults = {% include 'SonataDoctrinePHPCRAdminBundle:Tree:routing_defaults.html.twig' %};

        AdminTree.initTree({
            "selector": "#tree",
            "rootNode": "{{ tree.rootNode }}",
            "selected": "{{ tree.selectedNode }}",
            "labels": {{ tree.labels | json_encode() | raw}},
            "ajax": {
                "children_url": Routing.generate("_symfony_cmf_tree_{{ tree.alias }}_children", defaults),
                "move_url": Routing.generate("_symfony_cmf_tree_{{ tree.alias }}_move", defaults),
                "reorder_url": Routing.generate("_symfony_cmf_tree_{{ tree.alias }}_reorder", defaults)
            },
            "path": {
                "expanded":     treeState,
                "preloaded":    treeState
            },
            "types": {{ tree.nodeTypes | json_encode() | raw}},

            "routing_defaults": {}
        });
    });
</script>

<div id="tree"></div>
